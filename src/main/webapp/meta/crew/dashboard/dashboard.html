<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Dashboard</title>
	<link href="crewDashboardStyles.css" rel="stylesheet" id="currentCSS">
	<link href="https://fonts.cdnfonts.com/css/kiona-2" rel="stylesheet">
	<link href="https://use.fontawesome.com/releases/v5.13.0/css/all.css"
	      rel="stylesheet" type='text/css'>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<script src="dashboard.js" defer></script>
</head>
<body>
<div class="container">
	<header>
		<div class="dropdown">
			<button class="dropdownBtn">
				<img id="avatar" src="../../Brand_Identity/images/icons/whiteAvatar.png" alt="dropdown">
			</button>
			
			<div class="dropdown-content">
				<div class="item">
					<a href="./../profile/profile.html">Profile</a>
				</div>
				
				<div class="item">
					<a onclick="logout()">Log Out</a>  <!--missing HREF-->
				</div>
			</div>
		</div>
	</header>
	
	<nav>
		<div class="text">
			<img src="./../../Brand_Identity/images/Logo/Shotmaniacs_Text_Black.png" alt="SHOTMANIACS">
		</div>
		<div class="dash-box">
			<a href="dashboard.html" target="_self">
				<div class="box" id="dashboard">
					<img id="dashboard-icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
					<label> Dashboard</label>
				</div>
			</a>
			<a href="./../news/notifications.html" target="_self">
				<div class="box" id="News">
					<img id="news-icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
					<label>News</label>
				</div>
			</a>
			<a href="./../calendar/calendar.html" target="_self">
				<div class="box" id="calendar">
					<img id="calendar-icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
					<label> Calendar</label>
				</div>
			</a>
			<a href="./../bookings/Booking.html" target="_self">
				<div class="box" id="booking">
					<img id="booking-icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
					<label>Bookings</label>
				</div>
			</a>
			<a href="../../help/help.html" target="_self">
				<div class="box" id="help">
					<img id="help-icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
					<label>Help</label>
				</div>
			</a>
		</div>
	</nav>
	
	<main>
		<div class="page-title">
			<div class="image">
				<img src="./../../Brand_Identity/images/Logo/Shotmaniacs_Logo_Black_ZT.png" alt="Shotmaniacs">
			</div>
			<div class="text">My Bookings</div>
		</div>
		
		<div class="navigation">
			<!-- On main page -->
			<div class="filter">
				<button class="filter-btn">
					<span id="button-text">
						<i class="fas fa-filter filter-icon"></i>
							<span id="filter_button_text">Filter: Upcoming</span>
						<i class="fas fa-caret-down down-icon"></i>
					</span>
				</button>
				
				<div class="filter-content">
					<!--missing HREF-->
					<h6 class="dropdown-header">Time Stamp</h6>
					<div class="border-gradient"></div>
					<div class="item" onclick="updateBookings('future')">
						<p>Upcoming</p>
					</div>
					
					<div class="item" onclick="updateBookings('past')">
						<p>Past</p>
					</div>
					
					<div class="border-gradient"></div>
					<h6 class="dropdown-header">Labels</h6>
					<div class="border-gradient"></div>
					
					<div class="item" onclick="updateBookings('todo')">
						<p>TODO</p>
					</div>
					<div class="item" onclick="updateBookings('in_progress')">
						<p>IN-PROGRESS</p>
					</div>
					<div class="item" onclick="updateBookings('review')">
						<p>REVIEW</p>
					</div>
					<div class="item" onclick="updateBookings('done')">
						<p>DONE</p>
					</div>
				</div>
			</div>
			
			<form action="" autocomplete="off">
				<div class="search" id="searchbar">
					<label for="search-input"></label>
					<input type="text" class="input" id="search-input" placeholder="Booking name"
					       onfocus="getAllBookings()">
					
					<button class="search-icon-btn" id="search-button">
						<img class="magnifying-glass" src="./../../Brand_Identity/images/icons/Magnifying-glass.png"
						     alt="search">
					</button>
				</div>
			</form>
			
			<!-- On single Event -->
			<div class="title-bar">
				<div class="left-heading">
					<div class="heading">
						<h1 id="heading">Booking Name</h1>
					</div>
					
					<div class="navigation-pane" id="navigation">
						<p>
							<span id="backToBooking">My Bookings</span>
							/
							<span id="link">Booking Name</span>
						</p>
					</div>
				</div>
				<div class="right-heading">
					<div class="label-dropdown">
						<button class="labelButton NORMAL" id="label">
							<p>Set Label</p>
							<i class="fas fa-caret-down label-arrow"></i>
						</button>
						
						<div class="label-content" id="label_content">
							<div class="item" id="todo">
								<p>Todo</p>
							</div>
							
							<div class="item" id="in-progress">
								<p>In Progress</p>
							</div>
							
							<div class="item" id="review">
								<p>Review</p>
							</div>
							
							<div class="item" id="done">
								<p>Done</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- On main page -->
		<div class="booking-container" id="booking_container"></div>
		
		<!-- On single Event -->
		<div class="main_area">
			<div class="event-container">
				<div class="event-nav">
					<div class="announcement">
						<i class="fas fa-duotone fa-bullhorn"></i>
						<p>Announcement</p>
					</div>
					
					<div class="discussion">
						<i class="fas fa-duotone fa-comments"></i>
						<p>Discussion Forum</p>
					</div>
				</div>
				
				<div class="resources">
					<div class="heading">
						<h1> RESOURCES </h1>
					</div>
					<!-- <div class="files">
						<div class="pdf element">
							<a href="" download>
								<img src="./../../Brand_Identity/images/icons/pdf.png" alt="pdf">
								<p id="pdf-download">Event Details</p>
							</a>
						</div>
						
						<div class="doc element">
							<a href="" download>
								<img src="./../../Brand_Identity/images/icons/doc.png" alt="doc">
								<p id="doc-download">Plan</p>
							</a>
						</div>
						
						<div class="xlsx element">
							<a href="" download>
								<img src="./../../Brand_Identity/images/icons/excel_Icon.png" alt="xlsx">
								<p id="xlsx-download">Event Details</p>
							</a>
						</div>
					</div> -->
					
					<div class="event" id="event">
						<div class="event-info" id="event-name">
							<p>Name: </p>
						</div>
						
						<div class="event-info" id="event-type">
							<p>Event Type: </p>
						</div>
						
						<div class="event-info" id="date"> <!-- TODO CHANGE THESE TWO ID's WITH event-{id} incl. JS -->
							<p>Date: </p>
						</div>
						
						<div class="event-info" id="location">
							<p>Location: </p>
						</div>
						<div class="event-info" id="duration">
							<p>Duration: </p>
						</div>
						<div class="event-info" id="booking-type">
							<p>Booking Type: </p>
						</div>
						<div class="event-info" id="product-Manager">
							<p>Product Manager: </p>
						</div>
						<div class="event-info" id="crew">
							<p>Crew:
								<span>
									<ul>
										<li></li>
										<li></li>
										<li></li>
										<li></li>
										<li></li>
									</ul>
								</span>
							</p>
						</div>
					</div>
				</div>
			</div>
			
			
			<!-- Admins -->
			<div class="admins">
				<div id="head">
					Administrators
				</div>
				
				<div class="users" id="users"></div>
			</div>
		</div>
	</main>
	
	<aside>
		<div class="recent">
			<p>Recently accessed booking</p>
			
			<div class="latestBooking" id="Latest_Booking" onclick="toggleStyleAndPage(this)"></div>
		</div>
		
		<div class="stats">
			<p>Statistics</p>
			<div class="graph">
				<canvas id="chart" style="position:relative;width:150%;height:150%"></canvas>
				<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
				<script>
					// Array of bookings
					var bookings = [
						{"timestamp": "2023-01-15 10:30:00"},
						{"timestamp": "2023-02-05 14:45:00"},
						{"timestamp": "2023-02-18 09:15:00"},
						{"timestamp": "2023-03-02 16:20:00"},
						{"timestamp": "2023-03-15 11:30:00"},
						{"timestamp": "2023-04-10 13:45:00"},
						{"timestamp": "2023-05-01 09:00:00"},
						{"timestamp": "2023-05-18 15:30:00"},
						{"timestamp": "2023-06-08 10:15:00"},
						{"timestamp": "2023-06-22 12:30:00"},
						{"timestamp": "2023-01-15 10:30:00"},
						{"timestamp": "2023-02-05 14:45:00"},
						{"timestamp": "2023-02-18 09:15:00"},
						{"timestamp": "2023-03-02 16:20:00"},
						{"timestamp": "2023-03-15 11:30:00"},
						{"timestamp": "2023-04-10 13:45:00"},
						{"timestamp": "2023-05-01 09:00:00"},
						{"timestamp": "2023-05-18 15:30:00"},
						{"timestamp": "2023-06-08 10:15:00"},
						{"timestamp": "2023-06-22 12:30:00"},
						{"timestamp": "2023-07-05 18:45:00"},
						{"timestamp": "2023-07-20 11:00:00"},
						{"timestamp": "2023-08-10 14:30:00"},
						{"timestamp": "2023-08-24 08:15:00"},
						{"timestamp": "2023-09-06 16:20:00"},
						{"timestamp": "2023-09-20 10:30:00"},
						{"timestamp": "2023-10-10 13:45:00"},
						{"timestamp": "2023-10-25 09:00:00"},
						{"timestamp": "2023-11-08 15:30:00"},
						{"timestamp": "2023-11-22 10:15:00"},
						{"timestamp": "2023-12-05 14:45:00"},
						{"timestamp": "2023-12-20 09:15:00"},
						{"timestamp": "2024-01-10 16:30:00"},
						{"timestamp": "2024-01-25 11:00:00"},
						{"timestamp": "2024-02-08 17:45:00"},
						{"timestamp": "2024-02-23 10:30:00"},
						{"timestamp": "2024-03-05 14:00:00"},
						{"timestamp": "2024-03-20 09:30:00"},
						{"timestamp": "2024-04-10 13:00:00"},
						{"timestamp": "2024-04-25 08:15:00"},
						{"timestamp": "2024-05-08 16:20:00"},
						{"timestamp": "2024-05-23 10:45:00"},
						{"timestamp": "2024-06-05 15:00:00"},
						{"timestamp": "2024-06-20 09:30:00"},
						{"timestamp": "2024-07-10 14:00:00"}
					];

					// Count the number of bookings per month
					var bookingCounts = {};
					bookings.forEach(function(booking) {
						var date = new Date(booking.timestamp);
						var month = date.getFullYear() + '-' + (date.getMonth() + 1).toString().padStart(2, '0');

						if (bookingCounts[month]) {
							bookingCounts[month]++;
						} else {
							bookingCounts[month] = 1;
						}
					});

					// Convert the booking counts object to arrays
					var months = Object.keys(bookingCounts);
					var counts = months.map(function(month) {
						return bookingCounts[month];
					});

					// Get the canvas element
					var canvas = document.getElementById('chart');
					var ctx = canvas.getContext('2d');

					// Chart configuration
					var chartConfig = {
						type: 'line',
						data: {
							labels: months,
							datasets: [{
								label: 'Number of Bookings',
								data: counts,
								borderColor: 'blue',
								backgroundColor: 'transparent'
							}]
						},
						options: {
							responsive: true,
							title: {
								display: true,
							},
							scales: {
								x: {
									display: true,
									title: {
										display: true,
									},
									min: months[0],  // Specify the minimum value on the x-axis
									max: months[4]
								},
								y: {
									display: true,
									title: {
										display: true,
									},
								}
							}
						}
					};

					// Create the chart graph
					var chart = new Chart(ctx, chartConfig);
				</script>

			</div>
			<div class="numbers">
				<p>1st number: 28</p>
				<p>2nd number: 30</p>
				<p>3rd number: 18</p>
				<p>4th number: 5</p>
				<p id="total">Total number: 140</p>
			</div>
		</div>
	</aside>
</div>

</body>
</html>