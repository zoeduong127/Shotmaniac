<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link href="crewDashboardStyles.css" rel="stylesheet">
	<link href="https://fonts.cdnfonts.com/css/kiona-2" rel="stylesheet">
	<link href="https://use.fontawesome.com/releases/v5.13.0/css/all.css"
	      rel="stylesheet" type='text/css'>
	<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<script src="" defer>
</script>
<div class="container">
	<header>
		<div class="dropdown">
			<button class="dropdownBtn">
				<img id="avatar" src="../../Brand_Identity/images/icons/whiteAvatar.png" alt="dropdown">
			</button>
			
			<div class="dropdown-content">
				<div class="item">
					<a href="./../profile/profile.html">Profile</a>
				</div>
				
				<div class="item">
					<a>Log Out</a>  <!--missing HREF-->
				</div>
			</div>
		</div>
	</header>

	<nav>
		<div class="text">
			<img src="./../../Brand_Identity/images/Logo/Shotmaniacs_Text_Black.png" alt="SHOTMANIACS">
		</div>
		<div class="dash-box">
			<a href="dashboard.html" target="_self">
			<div class="box" id="dashboard">
				<img id="dashboard_icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
				<label> Dashboard</label>
			</div>
			</a>
			<a href="./../news/News.html" target="_self">
			<div class="box" id="News">
				<img id="news_icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
				<label>News</label>
			</div>
			</a>
			<a href="./../calendar/calendar.html" target="_self">
			<div class="box" id="calendar">
				<img id="calendar_icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
				<label> Calendar</label>
			</div>
			</a>
			<a href="./../bookings/bookings.html" target="_self">
			<div class="box" id="booking">
				<img id="booking_icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
				<label>Bookings</label>
			</div>
			</a>
			<a href="../../help/help.html" target="_self">
			<div class="box" id="help">
				<img id="help_icon" src="../../Brand_Identity/images/icons/crossed_Eye_Black.png" alt="">
				<label>Help</label>
			</div>
			</a>
		</div>
	</nav>
	
	<main>
		<div class="page-title">
			<div class="image">
				<img src="./../../Brand_Identity/images/Logo/Shotmaniacs_Logo_Black_ZT.png" alt="Shotmaniacs">
			</div>
			<div class="text">My Bookings</div>
		</div>
		<div class="navigation">
			<div class="filter">
				<button class="filter-btn">
					<i class="fas fa-filter filter-icon"></i>
						Filter:
					<i class="fas fa-caret-down down-icon"></i>
				</button>

				<script>

					function parseCookie(cookieString) {
						const cookies = {};
						cookieString.split(';').forEach(cookie => {
							const [name, value] = cookie.trim().split('=');
							cookies[name] = decodeURIComponent(value);
						});
						return cookies;
					}


					function updateBookings(filterType) {

						// const bookingWidget = document.createElement("div");
						// bookingWidget.setAttribute("class","booking");
						// bookingWidget.setAttribute("id", "booking_");

						var filter;

						switch (filterType) {
							case 'in_progress':
								filter = "ongoing";
								break;
							case 'future':
								filter = "ongoing";
								break;
							case 'past':
								filter = "past";
								break;
							default:
								filter = 'ongoing';
						}

						const cookies = parseCookie(document.cookie);
						const id = cookies['account_id'];

						const url = `http://localhost:8080/shotmaniacs2/api/crew/${id}/mybooking/timefilter/${filter}`;
						fetch(url)
								.then(response => response.json())
								.then(data => {
									data.forEach(booking => {
										console.log(booking.name);
									});
								})
								.catch(error => {
									// Handle any errors
									console.error(error);
								});
					}
				</script>

				<div class="filter-content">
					<!--missing HREF-->
					<div class="item" onclick="updateBookings('in_progress')">
						<p>In Progress</p>
					</div>
					<div class="item" onclick="updateBookings('future')">
						<p>Future</p>
					</div>
					
					<div class="item" onclick="updateBookings('past')">
						<p>Past</p>
					</div>
				</div>
			</div>
			<div class="search">
				<label for="search-input"></label>
				<input type="text" class="input" id="search-input" placeholder="Booking name">
				<button class="search-icon-btn">
					<img class="magnifying-glass" src="./../../Brand_Identity/images/icons/Magnifying-glass.png" alt="search">
				</button>
			</div>
		</div>
		<div class="booking-container">
			<div class="booking" id="1">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 30 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			</div>
			<div class="booking" id="2">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 30 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
			<div class="booking" id="3">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 1 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
			<div class="booking" id="4">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 1 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
			<div class="booking" id="5">
				<p> Event name </p>
				<div class="innerBooking right">
					<p> 1 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
			<div class="booking" id="6">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 1 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
			<div class="booking" id="7">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 5 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
			<div class="booking" id="8">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 5 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
			<div class="booking" id="9">
				<p> Event name </p>
				
				<div class="innerBooking right">
					<p> 8 July, 2023 </p>
				</div>
				<div class="innerBooking left"></div>
			
			</div>
		</div>
	</main>
	
	<aside>
		<div class="recent">
			<p>Recently accessed booking</p>
			
			<div class="latestBooking">
				<a href="">booking name</a>
				<p>Short description</p>
			</div>
		</div>
		
		<div class="stats">
			<p>Statistics</p>
			<div class="graph"></div>
			<div class="numbers">
				<p>1st number: 28</p>
				<p>2nd number: 30</p>
				<p>3rd number: 18</p>
				<p>4th number: 5</p>
				<p id="total">Total number: 140</p>
			</div>
		</div>
	</aside>
	
</div>

</body>
</html>